Code taken from https://github.com/obble/modui.

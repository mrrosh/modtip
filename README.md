Code take from https://github.com/obble/modui.
